plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
?mutate_jenks_breaks
??mutate_jenks_breaks
?mutate_jenks_brks
??mutate_jenks_brks
remotes::install_github("smh-ej/XploreR")
library(smh-ej/XploreR)
library(XploreR)
?mutate_jenks_brks
nyc_census_data %>%
mutate_jenks_brks(percent_bachelors)
nyc_census_data %>%
mutate_jenks_brks(median_incomeE,
n = 5)
nyc_census_data <- nyc_census_data %>%
mutate_jenks_brks(median_incomeE,
n = 5)
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_manual(values = brewer.pal(6, df1color),
labels = labels,
#brewer_pal(type = "seq",
#palette = df1color,
#direction = 1)(5),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_manual(values = brewer.pal(6, df1color),
#brewer_pal(type = "seq",
#palette = df1color,
#direction = 1)(5),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_manual(values = brewer.pal(6, df1color),
labels = dollar_format(),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_manual(values = brewer.pal(6, df1color),
fill = dollar_format(),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
?scale_fill_manual
ggplot_median_income_food_scrap
nyc_census_data$median_incomeE_brks
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = dollar_format(nyc_census_data$median_incomeE_brks),
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_manual(values = brewer.pal(6, df1color),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = dollar_format(nyc_census_data$median_incomeE_brks),
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_gradient(
labels = dollar_format(scale = .001,
prefix = "$",
suffix = "k")
) +
scale_fill_manual(values = brewer.pal(6, df1color),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
ggplot_choropleth_jenks <- function(df1, catcol1, df2,
plot_title, legend_title,
df1color="Greens",
dot_color_plot = "black",
dot_color_legend = "black") {
ggplot() +
geom_sf(
data = df1,
aes(fill = catcol1),
alpha = 0.85,
color = "white",
size = 0.01) +
geom_sf(
data = df2,
aes(color = "Food Scrap Drop-off"),
alpha = 0.7,
show.legend = "point",
pch = 21,
color = "white",
fill = dot_color_plot
) +
scale_fill_discrete(
labels = dollar_format(scale = .001,
prefix = "$",
suffix = "k")
) +
scale_fill_manual(values = brewer.pal(6, df1color),
guide = guide_legend(override.aes = list(
linetype = "blank",
shape = NA))) +
scale_color_manual(values = c("Food Scrap Drop-off" = dot_color_legend),
guide = guide_legend(
override.aes = list(
pch = 21,
fill = dot_color_legend,
color = "white",
linetype = "blank"))) +
theme_void() +
theme(plot.title.position = "plot",
plot.title = element_text(hjust = 0.5)) +
theme(panel.grid = element_line(color = "transparent")) +
labs(color = "",
title = plot_title,
fill = legend_title) +
annotation_scale(
location = "bl",
pad_x = unit(3, "cm")) +
annotation_north_arrow(
location = "br",
pad_x = unit(0.5, "in"),
style = north_arrow_fancy_orienteering)
}
ggplot_median_income_food_scrap <- ggplot_choropleth_jenks(df1 = nyc_census_data,
catcol1 = nyc_census_data$median_incomeE_brks,
df2 = food_scrap_sf,
df1color = "YlGnBu",
plot_title = "Median Income by Census Tract, 2016-2020 ACS",
legend_title = "Income ($USD)")
ggplot_median_income_food_scrap
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%$",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("$",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("$3d",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%+3.1f %%",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%$3.1f %$",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%$3.1f",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%d",median_incomeE_brks))
nyc_census_data %>%
mutate(median_incomeE_brks = sprintf("%d6",median_incomeE_brks))
class(nyc_census_data$median_incomeE_brks)
nyc_census_data %>%
mutate_jenks_brks(c("median_incomeE", "median_ageE"),
n = 5)
?mutate_jenks_brks
jenks_breaks <- function(df, col, n = 5) {
df %>%
mutate_jenks_brks(col, n = 5)
}
lappy(nyc_census_data[c("median_ageE",
"median_incomeE",
"percent_poverty",
"percent_bachelors",
"percent_public_transit",
"total_pop")], jenks_breaks)
lapply(nyc_census_data[c("median_ageE",
"median_incomeE",
"percent_poverty",
"percent_bachelors",
"percent_public_transit",
"total_pop")], jenks_breaks)
lapply(nyc_census_data[c("median_ageE",
"median_incomeE",
"percent_poverty",
"percent_bachelors",
"percent_public_transit",
"total_popE")], jenks_breaks)
nyc_census_data %>%
jenks_breaks(median_ageE)
nyc_census_data %>%
jenks_breaks(nyc_census_data$median_ageE)
nyc_census_data %>%
jenks_breaks(median_ageE)
jenks_breaks <- function(df, col, n = 5) {
df %>%
mutate_jenks_brks(df$col, n = 5)
}
nyc_census_data %>%
jenks_breaks(median_ageE)
nyc_census_data %>%
jenks_breaks(nyc_census_data$median_ageE)
nyc_census_data %>%
mutate_jenks_brks(median_ageE,n = 5) %>%
mutate_jenks_brks(median_incomeE,n = 5) %>%
mutate_jenks_brks(percent_poverty,n = 5) %>%
mutate_jenks_brks(percent_bachelors, n =5) %>%
mutate_jenks_brks(percent_public_transit, n = 5) %>%
mutate_jenks_brks(total_popE, n = 5)
